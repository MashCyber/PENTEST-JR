sudo echo "[+] Installing docker and zsh...."
sudo echo "[NOTE!!] Ensure running as sudo[root]..."
sudo echo "[*] Give script perm: <chmod 700 install-dock.zsh.sh>"
sudo echo "[*] Execute ./dock-zsh-install.sh <dev/prod> -- Empty param throws err!"

USER=$(whoami)

if [[ $USER == "root" ]];
then
  if [[ $1 == "dev" ]];
  then
    echo "[*]Installing Zsh..."
    sudo apt-get install zsh -y
    cd /opt
    sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
    echo "-------------------------"
    which zsh
    echo "-------------------------"
    
    
    echo "[*] Install latest docker version..."
    cd /opt
    sudo curl -fsSL https://get.docker.com -o get-docker.sh
    sudo sh get-docker.sh && docker --version
    sudo zsh
    

  elif [[ $1 == "dev" ]];
    then
      echo "[*]Installing Zsh..."
      sudo apt-get install zsh -y
      cd /opt
      sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" && zsh
      
      
      echo "[*] Install latest docker version..."
      cd /opt
      sudo curl -fsSL https://get.docker.com -o get-docker.sh
      sudo sh get-docker.sh && docker --version
      
      echo "[*] Installing docker compose..."
      cd /opt
      sudo curl -L "https://github.com/docker/compose/releases/download/2.24.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
      sudo zsh
    else
      echo "========================================"
      echo "Run script: ./install-dock-zsh.sh <dev/prod>"
      echo "========================================"
    fi
  else
  echo "========================================"
  echo "[CAUTION] Ensure you are running as ROOT"
  echo "========================================"
  fi
  
